sudo apt remove docker docker-engine docker.io containerd runc

sudo apt install --no-install-recommends apt-transport-https ca-certificates curl gnupg2

. /etc/os-release

curl -fsSL https://download.docker.com/linux/${ID}/gpg | sudo apt-key add -

echo "deb [arch=amd64] https://download.docker.com/linux/${ID} ${VERSION_CODENAME} stable" | sudo tee /etc/apt/sources.list.d/docker.list

sudo apt update

sudo apt install docker-ce docker-ce-cli containerd.io

sudo usermod -aG docker $USER

# Possible other steps here if using multiple WSL instances 
# https://dev.to/bowmanjd/install-docker-on-windows-wsl-without-docker-desktop-34m9

sudo sed -i -e 's/^\(docker:x\):[^:]\+/\1:36257/' /etc/group
sudo groupmod -g 36257 docker


DOCKER_DIR=/mnt/wsl/shared-docker
mkdir -pm o=,ug=rwx "$DOCKER_DIR"
chgrp docker "$DOCKER_DIR"

sudo mkdir /etc/docker && sudo cp ./daemon.json /etc/docker/ 

cp ./docker-service ~/bin/

echo "\n\nSuccesfully installed Docker."
